---
title: 图解密码技术（三）
time: 2021/11/1 08:40:00
tag: 密码学
description: 唉，分组密码，在第三章的基础上进行改进，在对称密码的基础上把他们分组，让密钥不那么长
category: 学习笔记
cover: /imgs/feng5.jpg
---



### 3.8 rijndael

rijndael使用的是SPN结构，每一轮进行了四个步骤，这四个步骤分别是SubBytes，ShiftRows,MixCOLUMNS和AddRoundkey。

#### 👉subBytes

Rijndael输入的每一组是180bit，也就是16Byte。首先进行subBytes操作。那么subBytes是怎么操作的呢？

subByte就是将每个字节替换成已经有了的替换表里面的值。

#### 👉ShiftRows

就是将以四字节为单位的行按照一定的规则向左移，每一行平移的字节数是不一样的

#### 👉MixColumns

对四字节的值进行比特运算，得到另一个四字节的值

#### 👉AddRoundKey

将MIXColumnns得到的值进行XOR运算。



**经过这四个步骤之后，Rijndael的一轮就结束了**

**解密的顺序与加密的顺序是相反的**



{% note blue 'fas fa-broom' simple %}

## 第四章 分组密码的更新迭代

{% endnote %}

> 就是那个加密解密的密钥相同的那个加密方式

分组密码的模式主要有五种：

* ECB
* CBC
* CFB
* OFB
* CTR



### 4.1 ECB

ECB是一种将明文分组直接加密的方式。ECB将明文直接砍成段，然后分别加密，但是可能会有频率攻击，攻击时改变分组的顺序，在解密的时候就没办法解密出真正的明文了

---

例：

  将明文分成三组分别加密，分别是付款人、收款人、交易金额。再分别加密

  攻击者已经知道了这三组的顺序，将第一组和第二组的密文调换了位置，使收付款的人对调



例2：对ECB的一种攻击

  小测验2，攻击者把名称和口令替换成一样的，服务器直接就不能识别然后存了进去，所以就能通过用户名知道密码了。

---



### 4.4 CBC(加密块的链式模式)

将分组的前一个加密的密文与后一个明文进行XOR，然后再加密。在这里有个初始化向量。解密的时候先将初始化密文与密文进行亦或，后面的再继续异或就可以知道明文了。

**初始化向量IV**：也就是一串二进制，每次加密的时候都会随机产生一个初始化向量。如果每次斗用一样的初始化向量，会有什么坏处呢？

  当用同一密钥对同一明文进行加密的时候他们的密文是相同的。当攻击者截取到了密文的时候发i发现这个和之前的密文是一样的，所以就知道明文也是一样的，所以就可以猜测意思。。。。

#### CBC的特点

CBC，如果明文一样了，但是密文也是不一样的，也就是解决了ECB的缺陷.

但是我们不能对其中的单独的明文进行加密，只能串行，不能并行

如果在解密的时候有一个密文损坏了，解密的时候只有两个明文受到了影响😃

![CBC加密和解密](image-20211114213850989.png)

#### 对CBC进行攻击

如果攻击者对**初始化向量**的其中一个bit进行反转，那整个密文就凉了。

<font color=green>但是如果只是对密文中的一个bit进行反转，影响的只有两组密文</font>

如果想要对加密后的密文进行特定组的特定bit进行改变，那也是很难的。。。



#### 填充提示攻击

[^老师你是在给自己讲课吗？]



#### CBC的应用实例

如果是先异或，后加密。这种模式与ECB是相等的，已经不是CBC了^ ^



### cts模式

在分组密码中，明文的长度不能被分组的长度整除的时候，最后一个分组需要填充。CTF模式是用最后一个分组的前一个密文分组的数据来填充，通常需要和ECB以及CBC模式配合使用。也就是用前一个分组的密文的最后几个bit来填充。。



### 4.5 CFB

CFB模式就是前一个密文分组会被送回到密码算法的输入端。将前一个密文的分组进行一个算法，变成了一个密钥流，然后这个密钥流与后一个明文分组进行XOR运算。

![CFB的加密解密](image-20211114214010285.png)

#### 对CFB的攻击

发送四组密文，截取了三段。第二天用同样的密钥，截取了三段，把昨天的放了进去，那么收到后解密的明文，第一组对，第二组错的，第三第四组是对的。

![对CFB的攻击](image-20211114214110294.png)

### 4.6 OFB

对初始化向量一直进行加密，而不是对明文和密文进行操作。

![OFB](image-20211114214146059.png)



#### 4.7 CTR

用计数器生成种子进行加密,明文每组异或的那一串数列不一样。可以先事先生成已经用计数器加密之后的序列，提高发送的速度。这样的话加密算法不用变了。

![CTR的加密和解密](image-20211114214219975.png)

#### 计数器的生成方法

每次加密的时候都用一个不同的值作为初始值，在前面先生成一个乱码的头，后面加序号。。。

![计数器](image-20211114214311685.png)

<font color=green>ECB和CBC是直接对明文进行加密，后两种是先生成一个密钥的串，然后直接和明文进行XOR</font>

[^哦是吗😃]





